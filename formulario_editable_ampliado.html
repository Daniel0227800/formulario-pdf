
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>PDF editable con m√°s campos</title>
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
</head>
<body>
  <h2>üìÑ Generar PDF con m√°s campos editables reales</h2>
  <button onclick="generarPDF()">Llenar PDF</button>

  <script>
    async function generarPDF() {
      try {
        const existingPdfBytes = await fetch('formulario_editable.pdf').then(res => res.arrayBuffer());
        const pdfDoc = await PDFLib.PDFDocument.load(existingPdfBytes);
        const form = pdfDoc.getForm();

        // Campos conocidos y simulados basados en nombres t√≠picos
        form.getTextField("CODIGO").setText("ABC123");
        form.getDropdown("D√çA").select("01");
        form.getTextField("MES").setText("Abril");

        form.getCheckBox("CHECK TRAMITE").check();
        form.getCheckBox("CHECK COTIZANTE").check();

        // Nuevos campos simulados (requiere que existan realmente con estos nombres en el PDF)
        const camposExtras = {
          "PRIMER APELLIDO": "PEREZ",
          "SEGUNDO APELLIDO": "LOPEZ",
          "PRIMER NOMBRE": "PEDRO",
          "SEGUNDO NOMBRE": "JOSE",
          "TIPO DOCUMENTO": "CC",
          "NUMERO DOCUMENTO": "1001971041",
          "SEXO": "M",
          "SEXO IDENTIFICACION": "M",
          "NACIONALIDAD": "COLOMBIANA",
          "LUGAR DE NACIMIENTO": "BOGOT√Å",
          "PAIS": "COLOMBIA",
          "DEPARTAMENTO": "CUNDINAMARCA",
          "MUNICIPIO": "BOGOT√Å",
          "FECHA NACIMIENTO": "1990-01-01"
        };

        for (const nombre in camposExtras) {
          try {
            form.getTextField(nombre).setText(camposExtras[nombre]);
          } catch (e) {
            console.warn("Campo no encontrado:", nombre);
          }
        }

        const pdfBytes = await pdfDoc.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'formulario_ampliado_editable.pdf';
        link.click();
      } catch (error) {
        console.error("‚ùå Error al generar el PDF:", error);
      }
    }
  </script>
</body>
</html>
