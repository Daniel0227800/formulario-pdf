
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Generar PDF con Datos</title>
  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
</head>
<body>
  <h1>Generar PDF con Datos de Formulario2.html</h1>
  <button onclick="generarPDF()">üìÑ Generar PDF con Datos</button>

  <script>
    async function generarPDF() {
      try {
        const url = 'formulario_editable.pdf'; // Debe estar en la misma carpeta
        const existingPdfBytes = await fetch(url).then(res => res.arrayBuffer());
        const pdfDoc = await PDFLib.PDFDocument.load(existingPdfBytes);
        const form = pdfDoc.getForm();

        // Aqu√≠ deber√≠as mapear todos los campos que existan en el HTML y el PDF
        const campos = {
          "11. SEXO BIOL√ìGICO": "sexo_biologico",
          "12. SEXO IDENTIFICACI√ìN": "sexo_identidad",
          "13. NACIONALIDAD": "Nacionalidad",
          "14. LUGAR DE NACIMIENTO": "lugar_nacimiento",
          "PA√çS": "Pais",
          "DEPARTAMENTO": "Departamento",
          "MUNICIPIO": "Municipio",
          "36. N√öMERO DE IDENTIDAD": "num_doc",
          "41. FECHA DE NACIMIENTO": "fecha_nacimiento",
          "II. TIPO DOCUMENTO IDENTIDAD": "tipo_doc",
          "II. PRIMER APELLIDO": "primer_apellido",
          "II. SEGUNDO APELLIDO": "segundo_apellido",
          "II. PRIMER NOMBRE": "primer_nombre",
          "II. SEGUNDO NOMBRE": "segundo_nombre"
        };

        for (const [campoPDF, idHTML] of Object.entries(campos)) {
          const valor = document.getElementById(idHTML)?.value || "";
          form.getTextField(campoPDF).setText(valor);
        }

        const pdfBytes = await pdfDoc.save();
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'formulario_completado.pdf';
        link.click();
      } catch (error) {
        console.error("‚ùå Error al generar el PDF:", error);
      }
    }
  </script>
</body>
</html>
